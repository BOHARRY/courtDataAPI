# æ³•å®˜åŠ©æ‰‹å·¥å…·å¢å¼·åˆ†æ

## ğŸ“Š ç•¶å‰æ•¸æ“šè³‡ç”¢åˆ†æ

åŸºæ–¼ `mapping.txt` å’Œå¯¦éš›åˆ¤æ±ºæ›¸ `TPHV,111,ä¸Š,397,20250730,1.json` çš„åˆ†æï¼Œæˆ‘å€‘æ“æœ‰éå¸¸è±å¯Œçš„æ•¸æ“šè³‡ç”¢ï¼š

### **å·²æœ‰çš„å¼·å¤§æ¬„ä½**

#### **1. å¾‹å¸«ç›¸é—œæ¬„ä½** ğŸ”¥
```javascript
- lawyers: å¾‹å¸«åˆ—è¡¨
- lawyersdef: è¢«å‘Šæ–¹å¾‹å¸«
- appellant_lawyers: ä¸Šè¨´äººå¾‹å¸«
- appellee_lawyers: è¢«ä¸Šè¨´äººå¾‹å¸«
- appeal_party_lawyers: ä¸Šè¨´ç•¶äº‹äººèˆ‡å¾‹å¸«é—œè¯ (nested)
- role_links: å¾‹å¸«èˆ‡ç•¶äº‹äººè§’è‰²é—œè¯ (è©³ç´°)
- lawyer_performance: å¾‹å¸«è¡¨ç¾è©•ä¼° (nested) ğŸŒŸ
  - lawyer: å¾‹å¸«å§“å
  - performance: Excellent | Good | Fair | Poor
  - outcome: çµæœæè¿°
  - justification: ç†ç”±èªªæ˜
- lawyer_assessment: å¾‹å¸«è©•ä¼°
  - plaintiff_side_comment: åŸå‘Šæ–¹å¾‹å¸«è©•è«–
  - defendant_side_comment: è¢«å‘Šæ–¹å¾‹å¸«è©•è«–
```

#### **2. æ³•å¾‹çˆ­é»æ¬„ä½** ğŸ”¥
```javascript
- legal_issues: æ³•å¾‹çˆ­é» (nested)
  - issue_id: çˆ­é»ID
  - topic: çˆ­é»ä¸»é¡Œ
  - plaintiff_position: åŸå‘Šç«‹å ´
  - defendant_position: è¢«å‘Šç«‹å ´
  - court_ruling: æ³•é™¢è£æ±º
  - cited_laws: å¼•ç”¨æ³•æ¢
- issue_tilt_by_party: çˆ­é»å‚¾å‘åˆ†æ (nested)
  - issue_id: çˆ­é»ID
  - topic: ä¸»é¡Œ
  - favored_party: æœ‰åˆ©æ–¹
  - confidence: ä¿¡å¿ƒåº¦
  - basis_para: ä¾æ“šæ®µè½
```

#### **3. å¼•ç”¨èˆ‡æ³•æ¢æ¬„ä½** ğŸ”¥
```javascript
- citations: å¼•ç”¨åˆ¤ä¾‹åˆ—è¡¨
- legal_basis: æ³•å¾‹ä¾æ“š
- legal_claim_basis: æ³•å¾‹è«‹æ±‚ä¾æ“š
- citable_paragraphs: å¯å¼•ç”¨æ®µè½ (nested)
  - para_id: æ®µè½ID
  - paragraph_text: æ®µè½æ–‡å­—
```

#### **4. AI ç”Ÿæˆçš„é«˜åƒ¹å€¼æ¬„ä½** ğŸ”¥
```javascript
- summary_ai: AI æ‘˜è¦
- summary_ai_full: AI å®Œæ•´æ‘˜è¦
- plaintiff_claims_summary: åŸå‘Šä¸»å¼µæ‘˜è¦
- defendant_defenses_summary: è¢«å‘ŠæŠ—è¾¯æ‘˜è¦
- main_reasons_ai: ä¸»è¦ç†ç”± (AI æå–)
- tags: æ¨™ç±¤åˆ—è¡¨
```

#### **5. ç•¶äº‹äººèˆ‡è§’è‰²æ¬„ä½**
```javascript
- plaintiff: åŸå‘Š
- defendant: è¢«å‘Š
- appellant: ä¸Šè¨´äºº
- appellee: è¢«ä¸Šè¨´äºº
- prosecutor: æª¢å¯Ÿå®˜
- representations: ä»£ç†é—œä¿‚ (nested)
```

#### **6. åˆ¤æ±ºçµæœèˆ‡é¡å‹æ¬„ä½**
```javascript
- verdict_type: åˆ¤æ±ºé¡å‹
- disposition: åˆ¤æ±ºè™•åˆ† (nested)
  - class: é¡åˆ¥
  - raw_verdict_type: åŸå§‹åˆ¤æ±ºé¡å‹
  - is_procedural: æ˜¯å¦ç¨‹åºæ€§
- is_procedural: æ˜¯å¦ç¨‹åºæ€§åˆ¤æ±º
- is_complex_case: æ˜¯å¦è¤‡é›œæ¡ˆä»¶
- is_ruling: æ˜¯å¦è£å®š
```

---

## ğŸ¯ ç•¶å‰å·¥å…·ç¼ºå£åˆ†æ

### **MCP_TOOLS ç¾ç‹€**
1. âœ… `search_judgments` - é—œéµè©æœå°‹
2. âœ… `semantic_search_judgments` - èªæ„æœå°‹
3. âœ… `get_case_details` - ç²å–æ¡ˆä»¶è©³æƒ…
4. âœ… `analyze_judge` - åˆ†ææ³•å®˜

### **LOCAL_FUNCTION_TOOLS ç¾ç‹€**
1. âœ… `calculate_verdict_statistics` - è¨ˆç®—åˆ¤æ±ºçµ±è¨ˆ
2. âœ… `calculate_citation_frequency` - è¨ˆç®—æ³•æ¢å¼•ç”¨é »ç‡
3. âœ… `analyze_verdict_trend` - åˆ†æåˆ¤æ±ºè¶¨å‹¢

---

## ğŸ’¡ å»ºè­°æ–°å¢çš„å·¥å…·

### **ğŸ”¥ å„ªå…ˆç´š 1: å¾‹å¸«åˆ†æå·¥å…· (è¶…å¼·éœ€æ±‚ï¼)**

#### **1. `analyze_lawyer_performance` (MCP Tool)**
```javascript
{
  name: "analyze_lawyer_performance",
  description: "åˆ†æå¾‹å¸«åœ¨ç‰¹å®šæ³•å®˜é¢å‰çš„è¡¨ç¾ã€‚æä¾›å¾‹å¸«å‹è¨´ç‡ã€å¸¸è¦‹ç­–ç•¥ã€æˆåŠŸæ¡ˆä¾‹ç­‰ã€‚",
  parameters: {
    lawyer_name: "å¾‹å¸«å§“å",
    judge_name: "æ³•å®˜å§“å (å¯é¸)",
    case_type: "æ¡ˆç”± (å¯é¸)",
    limit: "è¿”å›æ¡ˆä»¶æ•¸é‡"
  }
}
```

**ç‚ºä»€éº¼é‡è¦**ï¼š
- å¾‹å¸«æƒ³çŸ¥é“ã€Œé€™å€‹å¾‹å¸«åœ¨é€™å€‹æ³•å®˜é¢å‰è¡¨ç¾å¦‚ä½•ï¼Ÿã€
- å¾‹å¸«æƒ³çŸ¥é“ã€Œé€™å€‹å¾‹å¸«çš„æˆåŠŸç­–ç•¥æ˜¯ä»€éº¼ï¼Ÿã€
- å¾‹å¸«æƒ³çŸ¥é“ã€Œé€™å€‹å¾‹å¸«å¸¸ç”¨çš„æ³•æ¢å’Œè«–é»æ˜¯ä»€éº¼ï¼Ÿã€

**æ•¸æ“šæ”¯æ’**ï¼š
- `lawyer_performance` (nested) - å¾‹å¸«è¡¨ç¾è©•ä¼°
- `lawyer_assessment` - å¾‹å¸«è©•ä¼°
- `role_links` - å¾‹å¸«èˆ‡ç•¶äº‹äººè§’è‰²é—œè¯

---

#### **2. `compare_lawyers` (Local Function)**
```javascript
{
  name: "compare_lawyers",
  description: "æ¯”è¼ƒå¤šä½å¾‹å¸«åœ¨ç‰¹å®šæ³•å®˜æˆ–æ¡ˆç”±ä¸­çš„è¡¨ç¾ã€‚",
  parameters: {
    lawyers: ["å¾‹å¸«A", "å¾‹å¸«B"],
    judge_name: "æ³•å®˜å§“å (å¯é¸)",
    case_type: "æ¡ˆç”± (å¯é¸)"
  }
}
```

**ç‚ºä»€éº¼é‡è¦**ï¼š
- å¾‹å¸«æƒ³çŸ¥é“ã€Œæˆ‘æ‡‰è©²é¸å“ªå€‹å¾‹å¸«ï¼Ÿã€
- å¾‹å¸«æƒ³çŸ¥é“ã€Œå°æ–¹å¾‹å¸«çš„å¯¦åŠ›å¦‚ä½•ï¼Ÿã€

---

### **ğŸ”¥ å„ªå…ˆç´š 2: æ³•å¾‹çˆ­é»åˆ†æå·¥å…·**

#### **3. `analyze_legal_issues` (MCP Tool)**
```javascript
{
  name: "analyze_legal_issues",
  description: "åˆ†ææ³•å®˜åœ¨ç‰¹å®šæ³•å¾‹çˆ­é»ä¸Šçš„è£æ±ºå‚¾å‘ã€‚",
  parameters: {
    issue_topic: "çˆ­é»ä¸»é¡Œ (å¦‚: å¥‘ç´„æˆç«‹ã€è­‰æ“šå……åˆ†æ€§)",
    judge_name: "æ³•å®˜å§“å",
    case_type: "æ¡ˆç”± (å¯é¸)"
  }
}
```

**ç‚ºä»€éº¼é‡è¦**ï¼š
- å¾‹å¸«æƒ³çŸ¥é“ã€Œæ³•å®˜åœ¨é€™å€‹çˆ­é»ä¸Šé€šå¸¸æ€éº¼åˆ¤ï¼Ÿã€
- å¾‹å¸«æƒ³çŸ¥é“ã€Œæ³•å®˜é‡è¦–å“ªäº›è­‰æ“šï¼Ÿã€

**æ•¸æ“šæ”¯æ’**ï¼š
- `legal_issues` (nested) - æ³•å¾‹çˆ­é»
- `issue_tilt_by_party` (nested) - çˆ­é»å‚¾å‘åˆ†æ

---

#### **4. `find_similar_issues` (MCP Tool)**
```javascript
{
  name: "find_similar_issues",
  description: "æ‰¾å‡ºèˆ‡ç•¶å‰æ¡ˆä»¶ç›¸ä¼¼çš„æ³•å¾‹çˆ­é»æ¡ˆä¾‹ã€‚",
  parameters: {
    issue_description: "çˆ­é»æè¿°",
    judge_name: "æ³•å®˜å§“å (å¯é¸)",
    limit: "è¿”å›æ¡ˆä»¶æ•¸é‡"
  }
}
```

**ç‚ºä»€éº¼é‡è¦**ï¼š
- å¾‹å¸«æƒ³æ‰¾ã€Œé¡ä¼¼çˆ­é»çš„æ¡ˆä¾‹ã€
- å¾‹å¸«æƒ³çŸ¥é“ã€Œæ³•å®˜åœ¨é¡ä¼¼æƒ…æ³ä¸‹æ€éº¼åˆ¤ï¼Ÿã€

---

### **ğŸ”¥ å„ªå…ˆç´š 3: å¼•ç”¨èˆ‡åˆ¤ä¾‹åˆ†æå·¥å…·**

#### **5. `analyze_citations` (Local Function)**
```javascript
{
  name: "analyze_citations",
  description: "åˆ†ææ³•å®˜å¼•ç”¨åˆ¤ä¾‹çš„æ¨¡å¼ã€‚",
  parameters: {
    judgments: "åˆ¤æ±ºæ›¸é™£åˆ—",
    citation_type: "å¼•ç”¨é¡å‹ (æœ€é«˜æ³•é™¢åˆ¤æ±º | å¤§æ³•å®˜è§£é‡‹ | å…¶ä»–)"
  }
}
```

**ç‚ºä»€éº¼é‡è¦**ï¼š
- å¾‹å¸«æƒ³çŸ¥é“ã€Œæ³•å®˜å¸¸å¼•ç”¨å“ªäº›åˆ¤ä¾‹ï¼Ÿã€
- å¾‹å¸«æƒ³çŸ¥é“ã€Œæ³•å®˜é‡è¦–å“ªäº›æœ€é«˜æ³•é™¢åˆ¤æ±ºï¼Ÿã€

**æ•¸æ“šæ”¯æ’**ï¼š
- `citations` - å¼•ç”¨åˆ¤ä¾‹åˆ—è¡¨
- `citable_paragraphs` - å¯å¼•ç”¨æ®µè½

---

### **ğŸ”¥ å„ªå…ˆç´š 4: ç•¶äº‹äººèˆ‡è§’è‰²åˆ†æå·¥å…·**

#### **6. `analyze_party_patterns` (Local Function)**
```javascript
{
  name: "analyze_party_patterns",
  description: "åˆ†æç‰¹å®šç•¶äº‹äººé¡å‹(å€‹äºº/å…¬å¸)åœ¨æ³•å®˜é¢å‰çš„å‹è¨´ç‡ã€‚",
  parameters: {
    judgments: "åˆ¤æ±ºæ›¸é™£åˆ—",
    party_type: "ç•¶äº‹äººé¡å‹ (individual | organization)"
  }
}
```

**ç‚ºä»€éº¼é‡è¦**ï¼š
- å¾‹å¸«æƒ³çŸ¥é“ã€Œæ³•å®˜å°å…¬å¸è¨´å€‹äººçš„æ¡ˆä»¶å‚¾å‘å¦‚ä½•ï¼Ÿã€
- å¾‹å¸«æƒ³çŸ¥é“ã€Œæ³•å®˜å°ç‰¹å®šé¡å‹ç•¶äº‹äººæ˜¯å¦æœ‰åå¥½ï¼Ÿã€

**æ•¸æ“šæ”¯æ’**ï¼š
- `appeal_party_lawyers` (nested) - åŒ…å« `party_type`
- `role_links` - åŒ…å« `party_type`

---

### **ğŸ”¥ å„ªå…ˆç´š 5: æ¨™ç±¤èˆ‡åˆ†é¡åˆ†æå·¥å…·**

#### **7. `analyze_tags` (Local Function)**
```javascript
{
  name: "analyze_tags",
  description: "åˆ†æåˆ¤æ±ºæ›¸æ¨™ç±¤çš„åˆ†å¸ƒå’Œæ¨¡å¼ã€‚",
  parameters: {
    judgments: "åˆ¤æ±ºæ›¸é™£åˆ—",
    tag_category: "æ¨™ç±¤é¡åˆ¥ (å¯é¸)"
  }
}
```

**ç‚ºä»€éº¼é‡è¦**ï¼š
- å¾‹å¸«æƒ³çŸ¥é“ã€Œé€™é¡æ¡ˆä»¶çš„å¸¸è¦‹ç‰¹å¾µæ˜¯ä»€éº¼ï¼Ÿã€
- å¾‹å¸«æƒ³çŸ¥é“ã€Œæ³•å®˜è™•ç†éå“ªäº›é¡å‹çš„æ¡ˆä»¶ï¼Ÿã€

**æ•¸æ“šæ”¯æ’**ï¼š
- `tags` - æ¨™ç±¤åˆ—è¡¨ (éå¸¸è±å¯Œï¼)

---

## ğŸ“Š å»ºè­°çš„å¯¦æ–½å„ªå…ˆç´š

### **Phase 1: å¾‹å¸«åˆ†æ (ç«‹å³å¯¦æ–½)** ğŸ”¥ğŸ”¥ğŸ”¥
1. `analyze_lawyer_performance` (MCP Tool)
2. `compare_lawyers` (Local Function)

**ç†ç”±**ï¼š
- å¾‹å¸«æ˜¯æ³•å®˜åŠ©æ‰‹çš„æ ¸å¿ƒä½¿ç”¨è€…
- å¾‹å¸«æœ€é—œå¿ƒã€Œå°æ‰‹å¾‹å¸«ã€å’Œã€Œè‡ªå·±å¾‹å¸«ã€çš„è¡¨ç¾
- æ•¸æ“šå·²ç¶“éå¸¸å®Œæ•´ (`lawyer_performance`, `lawyer_assessment`)

---

### **Phase 2: æ³•å¾‹çˆ­é»åˆ†æ (é«˜å„ªå…ˆç´š)** ğŸ”¥ğŸ”¥
3. `analyze_legal_issues` (MCP Tool)
4. `find_similar_issues` (MCP Tool)

**ç†ç”±**ï¼š
- æ³•å¾‹çˆ­é»æ˜¯æ¡ˆä»¶çš„æ ¸å¿ƒ
- å¾‹å¸«éœ€è¦çŸ¥é“ã€Œæ³•å®˜åœ¨é€™å€‹çˆ­é»ä¸Šæ€éº¼åˆ¤ï¼Ÿã€
- æ•¸æ“šå·²ç¶“çµæ§‹åŒ– (`legal_issues`, `issue_tilt_by_party`)

---

### **Phase 3: å¼•ç”¨èˆ‡åˆ¤ä¾‹åˆ†æ (ä¸­å„ªå…ˆç´š)** ğŸ”¥
5. `analyze_citations` (Local Function)

**ç†ç”±**ï¼š
- å¾‹å¸«éœ€è¦çŸ¥é“ã€Œæ³•å®˜é‡è¦–å“ªäº›åˆ¤ä¾‹ï¼Ÿã€
- å¯ä»¥æå‡å¾‹å¸«çš„è«–è¿°å“è³ª

---

### **Phase 4: ç•¶äº‹äººèˆ‡æ¨™ç±¤åˆ†æ (ä½å„ªå…ˆç´š)**
6. `analyze_party_patterns` (Local Function)
7. `analyze_tags` (Local Function)

**ç†ç”±**ï¼š
- é€™äº›æ˜¯ã€ŒéŒ¦ä¸Šæ·»èŠ±ã€çš„åŠŸèƒ½
- å¯ä»¥ç­‰å‰é¢çš„åŠŸèƒ½ç©©å®šå¾Œå†å¯¦æ–½

---

## ğŸ¯ é æœŸæ•ˆæœ

### **å¯¦æ–½ Phase 1 å¾Œ**
```
å¾‹å¸«: "é™³ç¾©æ–‡å¾‹å¸«åœ¨ç‹å©‰å¦‚æ³•å®˜é¢å‰çš„è¡¨ç¾å¦‚ä½•ï¼Ÿ"

AI: "æ ¹æ“š 2025å¹´6-7æœˆ çš„æ•¸æ“šï¼Œé™³ç¾©æ–‡å¾‹å¸«åœ¨ç‹å©‰å¦‚æ³•å®˜é¢å‰çš„è¡¨ç¾ï¼š

**æ•´é«”è¡¨ç¾**ï¼š
- æ¡ˆä»¶æ•¸ï¼š5 ç­†
- å‹è¨´ç‡ï¼š80% (4 ç­†å‹è¨´ï¼Œ1 ç­†æ•—è¨´)
- è¡¨ç¾è©•ç´šï¼šExcellent (4 ç­†), Good (1 ç­†)

**æˆåŠŸæ¡ˆä¾‹**ï¼š
1. PCDV,114,è¨´,1434,20250714,1 (è¿”é‚„æŠ•è³‡æœ¬é‡‘)
   - çµæœï¼šåŸå‘Šå‹è¨´
   - è©•åƒ¹ï¼šã€Œæ³•é™¢èªå®šé‡‘å•†å…¬å¸å…·ç¢ºèªåˆ©ç›Šã€
   - é—œéµç­–ç•¥ï¼šæä¾›å®Œæ•´çš„åˆç´„æ–‡ä»¶å’Œé‡‘æµè­‰æ˜

2. TPHV,111,ä¸Š,397,20250730,1 (åˆ†é…è¡¨ç•°è­°)
   - çµæœï¼šéƒ¨åˆ†å‹è¨´
   - è©•åƒ¹ï¼šã€ŒæˆåŠŸçˆ­å–ç¢ºèªç¥¨æ“šå‚µæ¬Šä¸å­˜åœ¨ã€
   - é—œéµç­–ç•¥ï¼šæ™‚æ•ˆæŠ—è¾¯

**å¸¸ç”¨æ³•æ¢**ï¼š
- æ°‘æ³•ç¬¬320æ¢ (æ–°å‚µæ¸…å„Ÿ) - å‡ºç¾ 3 æ¬¡
- ç¥¨æ“šæ³•ç¬¬22æ¢ (æ™‚æ•ˆ) - å‡ºç¾ 2 æ¬¡

**å¸¸è¦‹ç­–ç•¥**ï¼š
- é‡è¦–è­‰æ“šå®Œæ•´æ€§ (5/5 ç­†æ¡ˆä»¶)
- å–„ç”¨æ™‚æ•ˆæŠ—è¾¯ (2/5 ç­†æ¡ˆä»¶)
- å¼·èª¿å¥‘ç´„æˆç«‹è­‰æ˜ (3/5 ç­†æ¡ˆä»¶)

ğŸ“Š æ•¸æ“šèªªæ˜ï¼š
ä»¥ä¸Šåˆ†æåŸºæ–¼ç‹å©‰å¦‚æ³•å®˜åœ¨ 2025å¹´6-7æœˆ çš„åˆ¤æ±ºæ•¸æ“šï¼ˆå…± 5 ç­†é™³ç¾©æ–‡å¾‹å¸«åƒèˆ‡çš„æ¡ˆä»¶ï¼‰ã€‚"
```

---

## ğŸ’¡ ç¸½çµ

### **ç•¶å‰æ•¸æ“šè³‡ç”¢**
- âœ… éå¸¸è±å¯Œçš„å¾‹å¸«ç›¸é—œæ¬„ä½
- âœ… å®Œæ•´çš„æ³•å¾‹çˆ­é»çµæ§‹åŒ–æ•¸æ“š
- âœ… è©³ç´°çš„å¼•ç”¨èˆ‡åˆ¤ä¾‹è³‡è¨Š
- âœ… AI ç”Ÿæˆçš„é«˜å“è³ªæ‘˜è¦å’Œè©•ä¼°

### **å»ºè­°æ–°å¢å·¥å…·**
1. ğŸ”¥ğŸ”¥ğŸ”¥ `analyze_lawyer_performance` - å¾‹å¸«è¡¨ç¾åˆ†æ
2. ğŸ”¥ğŸ”¥ğŸ”¥ `compare_lawyers` - å¾‹å¸«æ¯”è¼ƒ
3. ğŸ”¥ğŸ”¥ `analyze_legal_issues` - æ³•å¾‹çˆ­é»åˆ†æ
4. ğŸ”¥ğŸ”¥ `find_similar_issues` - ç›¸ä¼¼çˆ­é»æŸ¥æ‰¾
5. ğŸ”¥ `analyze_citations` - å¼•ç”¨åˆ†æ
6. `analyze_party_patterns` - ç•¶äº‹äººæ¨¡å¼åˆ†æ
7. `analyze_tags` - æ¨™ç±¤åˆ†æ

### **å¯¦æ–½å»ºè­°**
- **ç«‹å³å¯¦æ–½**: Phase 1 (å¾‹å¸«åˆ†æ)
- **é«˜å„ªå…ˆç´š**: Phase 2 (æ³•å¾‹çˆ­é»åˆ†æ)
- **ä¸­å„ªå…ˆç´š**: Phase 3 (å¼•ç”¨åˆ†æ)
- **ä½å„ªå…ˆç´š**: Phase 4 (ç•¶äº‹äººèˆ‡æ¨™ç±¤åˆ†æ)

---

**ä½ çš„æ•¸æ“šè³‡ç”¢éå¸¸è±å¯Œï¼ç‰¹åˆ¥æ˜¯å¾‹å¸«ç›¸é—œçš„æ¬„ä½ï¼Œé€™æ˜¯ä¸€å€‹å·¨å¤§çš„å„ªå‹¢ï¼** ğŸ‰

**å»ºè­°ç«‹å³å¯¦æ–½ Phase 1 çš„å¾‹å¸«åˆ†æå·¥å…·ï¼Œé€™å°‡å¤§å¹…æå‡æ³•å®˜åŠ©æ‰‹çš„å¯¦ç”¨æ€§ï¼** ğŸš€


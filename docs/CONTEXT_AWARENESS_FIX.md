# ğŸ¯ ä¸Šä¸‹æ–‡æ„ŸçŸ¥å„ªåŒ–è¨˜éŒ„

## ğŸ“‹ å•é¡Œæè¿°

### ç™¼ç¾çš„å•é¡Œ

**ç”¨æˆ¶å ´æ™¯**: åœ¨ç‹å©‰å¦‚æ³•å®˜çš„è©³æƒ…é é¢ï¼Œæå•ã€Œæ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?ã€

**éŒ¯èª¤è¡Œç‚º**:
```javascript
AI èª¿ç”¨: search_judgments({ 
  query: '*', 
  verdict_type: 'åŸå‘Šå‹è¨´', 
  limit: 100 
})
// âŒ æ²’æœ‰ judge_name åƒæ•¸!

çµæœ: è¿”å›æ‰€æœ‰æ³•å®˜çš„ 1997 ç­†åŸå‘Šå‹è¨´æ¡ˆä»¶
```

**å•é¡Œåˆ†æ**:
1. âŒ AI æ²’æœ‰è­˜åˆ¥åˆ°ç”¨æˆ¶åœ¨ç‰¹å®šæ³•å®˜çš„é é¢
2. âŒ ç”¨æˆ¶å•ã€Œæ³•å®˜ã€æ™‚ï¼ŒAI ç†è§£ç‚ºã€Œæ‰€æœ‰æ³•å®˜ã€è€Œéã€Œç‹å©‰å¦‚æ³•å®˜ã€
3. âŒ å‰ç«¯çš„ä¸Šä¸‹æ–‡æ³¨å…¥ä¸å¤ æ˜ç¢º
4. âŒ å¾Œç«¯çš„ System Prompt æ²’æœ‰å¼·èª¿ä¸Šä¸‹æ–‡æ„ŸçŸ¥

**é æœŸè¡Œç‚º**:
```javascript
AI èª¿ç”¨: search_judgments({ 
  query: '*', 
  judge_name: 'ç‹å©‰å¦‚',  // âœ… æ‡‰è©²åŠ ä¸Šæ³•å®˜åç¨±!
  verdict_type: 'åŸå‘Šå‹è¨´', 
  limit: 100 
})

çµæœ: è¿”å›ç‹å©‰å¦‚æ³•å®˜çš„åŸå‘Šå‹è¨´æ¡ˆä»¶ï¼ˆç´„ 7 ç­†ï¼‰
```

---

## âœ… è§£æ±ºæ–¹æ¡ˆ

### ä¿®æ”¹ 1: å‰ç«¯ä¸Šä¸‹æ–‡æ³¨å…¥å„ªåŒ–

**æ–‡ä»¶**: `d:/court_data/frontend-court-search-web/lawsowl/src/components/judge/JudgeConversationPanelGreen.js`

**åŸæœ¬çš„ä¸Šä¸‹æ–‡**:
```javascript
ç•¶å‰æŸ¥è©¢çš„æ³•å®˜è³‡è¨Šï¼š
- æ³•å®˜å§“åï¼šç‹å©‰å¦‚
- æ‰€å±¬æ³•é™¢ï¼šå°ç£æ–°åŒ—åœ°æ–¹æ³•é™¢
- è¿‘ä¸‰å¹´æ¡ˆä»¶æ•¸ï¼š19

ç”¨æˆ¶å•é¡Œï¼šæ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?
```

**å„ªåŒ–å¾Œçš„ä¸Šä¸‹æ–‡**:
```javascript
âš ï¸ é‡è¦ä¸Šä¸‹æ–‡ï¼šç”¨æˆ¶æ­£åœ¨æŸ¥è©¢ç‰¹å®šæ³•å®˜çš„è³‡è¨Šï¼Œè«‹å‹™å¿…é‡å°é€™ä½æ³•å®˜é€²è¡Œåˆ†æã€‚

ç•¶å‰æŸ¥è©¢çš„æ³•å®˜ï¼š
- æ³•å®˜å§“åï¼šç‹å©‰å¦‚
- æ‰€å±¬æ³•é™¢ï¼šå°ç£æ–°åŒ—åœ°æ–¹æ³•é™¢
- è¿‘ä¸‰å¹´æ¡ˆä»¶æ•¸ï¼š19

âš ï¸ å¦‚æœç”¨æˆ¶å•é¡Œä¸­æåˆ°ã€Œæ³•å®˜ã€ã€ã€Œé€™ä½æ³•å®˜ã€ã€ã€Œè©²æ³•å®˜ã€ç­‰è©ï¼Œéƒ½æ˜¯æŒ‡ã€Œç‹å©‰å¦‚ã€æ³•å®˜ã€‚
âš ï¸ è«‹åœ¨æ‰€æœ‰å·¥å…·èª¿ç”¨ä¸­ä½¿ç”¨ judge_name="ç‹å©‰å¦‚" åƒæ•¸ã€‚

ç”¨æˆ¶å•é¡Œï¼šæ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?
```

**æ”¹é€²é»**:
1. âœ… ä½¿ç”¨ âš ï¸ emoji å¼·èª¿é‡è¦æ€§
2. âœ… æ˜ç¢ºèªªæ˜ã€Œæ³•å®˜ã€æŒ‡çš„æ˜¯ã€Œç‹å©‰å¦‚ã€
3. âœ… ç›´æ¥æŒ‡ç¤ºè¦ä½¿ç”¨ judge_name åƒæ•¸
4. âœ… æ ¼å¼æ›´æ¸…æ™°ï¼Œæ›´å®¹æ˜“è¢« AI è­˜åˆ¥

---

### ä¿®æ”¹ 2: å¾Œç«¯ System Prompt å„ªåŒ–

**æ–‡ä»¶**: `d:/court_data/courtDataAPI/utils/ai-agent-tools.js`

**æ–°å¢å·¥ä½œæµç¨‹æ­¥é©Ÿ**:
```
**å·¥ä½œæµç¨‹**:
1. ç†è§£ç”¨æˆ¶å•é¡Œ
2. âš ï¸ **æª¢æŸ¥ä¸Šä¸‹æ–‡** - å¦‚æœç”¨æˆ¶å•é¡Œä¸­åŒ…å«ã€Œç•¶å‰æŸ¥è©¢çš„æ³•å®˜ã€è³‡è¨Š,
   å‹™å¿…ä½¿ç”¨è©²æ³•å®˜åç¨±
3. æ±ºå®šéœ€è¦èª¿ç”¨å“ªäº›å·¥å…·
4. å…ˆèª¿ç”¨ MCP å·¥å…·ç²å–æ•¸æ“š
5. å†èª¿ç”¨æœ¬åœ°å‡½æ•¸è™•ç†æ•¸æ“š
6. ç”Ÿæˆè‡ªç„¶èªè¨€å›ç­”
```

**æ–°å¢é‡è¦æé†’**:
```
**é‡è¦æé†’ - ä¸Šä¸‹æ–‡æ„ŸçŸ¥**:
- å¦‚æœç”¨æˆ¶å•é¡Œé–‹é ­æœ‰ã€Œâš ï¸ é‡è¦ä¸Šä¸‹æ–‡ï¼šç”¨æˆ¶æ­£åœ¨æŸ¥è©¢ç‰¹å®šæ³•å®˜ã€,
  è¡¨ç¤ºç”¨æˆ¶åœ¨ç‰¹å®šæ³•å®˜çš„é é¢
- æ­¤æ™‚ç”¨æˆ¶å•é¡Œä¸­çš„ã€Œæ³•å®˜ã€ã€ã€Œé€™ä½æ³•å®˜ã€ã€ã€Œè©²æ³•å®˜ã€éƒ½æ˜¯æŒ‡ä¸Šä¸‹æ–‡ä¸­æåˆ°çš„æ³•å®˜
- å‹™å¿…åœ¨æ‰€æœ‰å·¥å…·èª¿ç”¨ä¸­ä½¿ç”¨ judge_name åƒæ•¸æŒ‡å®šè©²æ³•å®˜
- ç¯„ä¾‹: ä¸Šä¸‹æ–‡èªªã€Œç•¶å‰æŸ¥è©¢çš„æ³•å®˜ï¼šç‹å©‰å¦‚ã€,ç”¨æˆ¶å•ã€Œæ³•å®˜çš„å‹è¨´ç‡?ã€
  â†’ èª¿ç”¨å·¥å…·æ™‚ä½¿ç”¨ judge_name="ç‹å©‰å¦‚"
```

**æ–°å¢ç¯„ä¾‹ 6**:
```
ç¯„ä¾‹ 6: "æ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?" (å¸¶ä¸Šä¸‹æ–‡) â­ é‡è¦ç¯„ä¾‹
ä¸Šä¸‹æ–‡:
âš ï¸ é‡è¦ä¸Šä¸‹æ–‡ï¼šç”¨æˆ¶æ­£åœ¨æŸ¥è©¢ç‰¹å®šæ³•å®˜çš„è³‡è¨Š
ç•¶å‰æŸ¥è©¢çš„æ³•å®˜ï¼šç‹å©‰å¦‚

æ­¥é©Ÿ:
1. âš ï¸ è­˜åˆ¥ä¸Šä¸‹æ–‡ - ç”¨æˆ¶å•çš„æ˜¯ã€Œç‹å©‰å¦‚æ³•å®˜ã€çš„å‹è¨´æ¡ˆä»¶
2. èª¿ç”¨ search_judgments (
     query="*", 
     judge_name="ç‹å©‰å¦‚",  // âš ï¸ å‹™å¿…åŠ ä¸Š!
     verdict_type="åŸå‘Šå‹è¨´", 
     limit=100
   )
3. èª¿ç”¨ calculate_case_type_distribution (judgments=çµæœ, group_by="case_type")
4. ç”Ÿæˆå›ç­”: "æ ¹æ“š 2025å¹´6-7æœˆ çš„æ•¸æ“š,ç‹å©‰å¦‚æ³•å®˜åœ¨åŸå‘Šå‹è¨´æ¡ˆä»¶ä¸­,
   å¸¸è¦‹æ¡ˆç”±åŒ…æ‹¬: XXã€YYã€ZZ..."
```

---

## ğŸ“Š é æœŸæ•ˆæœ

### ä¿®æ”¹å‰
```
ç”¨æˆ¶åœ¨ç‹å©‰å¦‚æ³•å®˜é é¢å•: "æ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?"

AI ç†è§£: æ‰€æœ‰æ³•å®˜çš„å‹è¨´æ¡ˆä»¶

AI èª¿ç”¨:
search_judgments({ query: '*', verdict_type: 'åŸå‘Šå‹è¨´', limit: 100 })
â†’ è¿”å› 1997 ç­†ï¼ˆæ‰€æœ‰æ³•å®˜ï¼‰

AI å›ç­”:
"æ ¹æ“šæ•¸æ“šï¼Œå°æ–¼å‹è¨´æ¡ˆä»¶çš„å…±é€šæ€§åˆ†æ...
 å¸¸è¦‹æ¡ˆç”±åŒ…æ‹¬: æ¸…å„Ÿå‚µå‹™ã€è¿”é‚„è²¡ç”¢..." âŒ
ï¼ˆé€™æ˜¯æ‰€æœ‰æ³•å®˜çš„çµ±è¨ˆï¼Œä¸æ˜¯ç‹å©‰å¦‚æ³•å®˜çš„ï¼‰
```

### ä¿®æ”¹å¾Œ
```
ç”¨æˆ¶åœ¨ç‹å©‰å¦‚æ³•å®˜é é¢å•: "æ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?"

å‰ç«¯æ³¨å…¥ä¸Šä¸‹æ–‡:
âš ï¸ é‡è¦ä¸Šä¸‹æ–‡ï¼šç”¨æˆ¶æ­£åœ¨æŸ¥è©¢ç‰¹å®šæ³•å®˜çš„è³‡è¨Š
ç•¶å‰æŸ¥è©¢çš„æ³•å®˜ï¼šç‹å©‰å¦‚
âš ï¸ å¦‚æœç”¨æˆ¶å•é¡Œä¸­æåˆ°ã€Œæ³•å®˜ã€ï¼Œéƒ½æ˜¯æŒ‡ã€Œç‹å©‰å¦‚ã€æ³•å®˜

AI ç†è§£: ç‹å©‰å¦‚æ³•å®˜çš„å‹è¨´æ¡ˆä»¶

AI èª¿ç”¨:
search_judgments({ 
  query: '*', 
  judge_name: 'ç‹å©‰å¦‚',  // âœ… åŠ ä¸Šäº†!
  verdict_type: 'åŸå‘Šå‹è¨´', 
  limit: 100 
})
â†’ è¿”å› 7 ç­†ï¼ˆç‹å©‰å¦‚æ³•å®˜çš„åŸå‘Šå‹è¨´æ¡ˆä»¶ï¼‰

AI å›ç­”:
"æ ¹æ“š 2025å¹´6-7æœˆ çš„æ•¸æ“šï¼Œç‹å©‰å¦‚æ³•å®˜åœ¨åŸå‘Šå‹è¨´æ¡ˆä»¶ä¸­ï¼Œ
 å¸¸è¦‹æ¡ˆç”±åŒ…æ‹¬: è¿”é‚„æŠ•è³‡æœ¬é‡‘ã€è¿”é‚„ä¿¡è¨—è²¡ç”¢ã€æå®³è³ å„Ÿ..." âœ…
ï¼ˆé€™æ˜¯ç‹å©‰å¦‚æ³•å®˜çš„çµ±è¨ˆï¼‰
```

---

## ğŸ§ª æ¸¬è©¦è¨ˆåŠƒ

### æ¸¬è©¦æ¡ˆä¾‹ 1: å‹è¨´æ¡ˆä»¶å…±é€šæ€§
```
å ´æ™¯: åœ¨ç‹å©‰å¦‚æ³•å®˜é é¢
å•é¡Œ: "æ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?"

é æœŸ:
- AI èª¿ç”¨ search_judgments æ™‚åŠ ä¸Š judge_name="ç‹å©‰å¦‚"
- è¿”å›ç´„ 7 ç­†æ¡ˆä»¶ï¼ˆç‹å©‰å¦‚æ³•å®˜çš„åŸå‘Šå‹è¨´æ¡ˆä»¶ï¼‰
- å›ç­”ä¸­æåˆ°ã€Œç‹å©‰å¦‚æ³•å®˜ã€
- æ¡ˆç”±çµ±è¨ˆç¬¦åˆç‹å©‰å¦‚æ³•å®˜çš„æ•¸æ“š
```

### æ¸¬è©¦æ¡ˆä¾‹ 2: æ•—è¨´æ¡ˆä»¶åˆ†æ
```
å ´æ™¯: åœ¨ç‹å©‰å¦‚æ³•å®˜é é¢
å•é¡Œ: "æ³•å®˜å°æ–¼æ•—è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼ç‰¹é»?"

é æœŸ:
- AI èª¿ç”¨æ™‚åŠ ä¸Š judge_name="ç‹å©‰å¦‚"
- è¿”å›ç‹å©‰å¦‚æ³•å®˜çš„åŸå‘Šæ•—è¨´æ¡ˆä»¶
- å›ç­”é‡å°ç‹å©‰å¦‚æ³•å®˜
```

### æ¸¬è©¦æ¡ˆä¾‹ 3: æ³›æŒ‡å•é¡Œ
```
å ´æ™¯: åœ¨ç‹å©‰å¦‚æ³•å®˜é é¢
å•é¡Œ: "é€™ä½æ³•å®˜çš„åˆ¤æ±ºå‚¾å‘å¦‚ä½•?"

é æœŸ:
- AI ç†è§£ã€Œé€™ä½æ³•å®˜ã€= ç‹å©‰å¦‚
- èª¿ç”¨ analyze_judge(judge_name="ç‹å©‰å¦‚")
- å›ç­”é‡å°ç‹å©‰å¦‚æ³•å®˜
```

### æ¸¬è©¦æ¡ˆä¾‹ 4: å°æ¯”æ¸¬è©¦ï¼ˆjudge-mcp-demoï¼‰
```
å ´æ™¯: åœ¨ judge-mcp-demo é é¢
å•é¡Œ: "æ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?"

é æœŸ:
- å› ç‚ºæ²’æœ‰ä¸Šä¸‹æ–‡ï¼ŒAI æœƒæŸ¥è©¢æ‰€æœ‰æ³•å®˜
- è¿”å› 1997 ç­†æ¡ˆä»¶
- é€™æ˜¯æ­£ç¢ºçš„è¡Œç‚ºï¼ˆå› ç‚ºæ²’æœ‰æŒ‡å®šæ³•å®˜ï¼‰
```

---

## ğŸ” æŠ€è¡“ç´°ç¯€

### ä¸Šä¸‹æ–‡æ³¨å…¥æ™‚æ©Ÿ

**ç¬¬ä¸€æ¬¡æå•æ™‚æ³¨å…¥**:
```javascript
if (messages.length === 1) {  // åªæœ‰æ­¡è¿æ¶ˆæ¯
  contextualQuestion = `
    âš ï¸ é‡è¦ä¸Šä¸‹æ–‡ï¼š...
    ç•¶å‰æŸ¥è©¢çš„æ³•å®˜ï¼š${judgeName}
    ...
    ç”¨æˆ¶å•é¡Œï¼š${userQuestion}
  `.trim();
}
```

**å¾ŒçºŒæå•ä¸é‡è¤‡æ³¨å…¥**:
- å°è©±æ­·å²å·²ç¶“åŒ…å«ä¸Šä¸‹æ–‡
- AI æœƒè¨˜ä½ç•¶å‰æŸ¥è©¢çš„æ³•å®˜
- é¿å…é‡è¤‡æ³¨å…¥å°è‡´ token æµªè²»

### AI è­˜åˆ¥ä¸Šä¸‹æ–‡çš„é—œéµ

1. **âš ï¸ emoji**: è¦–è¦ºä¸Šçªå‡ºé‡è¦ä¿¡æ¯
2. **æ˜ç¢ºæŒ‡ç¤º**: ã€Œè«‹å‹™å¿…é‡å°é€™ä½æ³•å®˜ã€
3. **å…·é«”ç¯„ä¾‹**: ã€Œjudge_name="ç‹å©‰å¦‚"ã€
4. **é‡è¤‡å¼·èª¿**: å¤šæ¬¡æåˆ°è¦ä½¿ç”¨ judge_name åƒæ•¸

---

## âœ… æª¢æŸ¥æ¸…å–®

### å‰ç«¯ä¿®æ”¹
- [x] å„ªåŒ–ä¸Šä¸‹æ–‡æ³¨å…¥æ ¼å¼
- [x] æ·»åŠ  âš ï¸ å¼·èª¿æ¨™è¨˜
- [x] æ˜ç¢ºæŒ‡ç¤ºä½¿ç”¨ judge_name åƒæ•¸

### å¾Œç«¯ä¿®æ”¹
- [x] æ–°å¢å·¥ä½œæµç¨‹æ­¥é©Ÿï¼ˆæª¢æŸ¥ä¸Šä¸‹æ–‡ï¼‰
- [x] æ–°å¢é‡è¦æé†’ï¼ˆä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼‰
- [x] æ–°å¢ç¯„ä¾‹ 6ï¼ˆå¸¶ä¸Šä¸‹æ–‡çš„å•é¡Œï¼‰

### å¾…æ¸¬è©¦
- [ ] æ¸¬è©¦æ¡ˆä¾‹ 1: å‹è¨´æ¡ˆä»¶å…±é€šæ€§
- [ ] æ¸¬è©¦æ¡ˆä¾‹ 2: æ•—è¨´æ¡ˆä»¶åˆ†æ
- [ ] æ¸¬è©¦æ¡ˆä¾‹ 3: æ³›æŒ‡å•é¡Œ
- [ ] æ¸¬è©¦æ¡ˆä¾‹ 4: å°æ¯”æ¸¬è©¦
- [ ] é©—è­‰ AI èª¿ç”¨æ™‚åŠ ä¸Š judge_name
- [ ] é©—è­‰è¿”å›æ¡ˆä»¶æ•¸ç¬¦åˆé æœŸ

### å¾…éƒ¨ç½²
- [ ] é‡å•Ÿå‰ç«¯æœå‹™
- [ ] é‡å•Ÿå¾Œç«¯æœå‹™
- [ ] æ¸…é™¤ç€è¦½å™¨ç·©å­˜
- [ ] é‡æ–°æ¸¬è©¦å•é¡Œ

---

## ğŸš€ éƒ¨ç½²æ­¥é©Ÿ

### 1. é‡å•Ÿå¾Œç«¯æœå‹™
```bash
cd d:\court_data\courtDataAPI
# Ctrl+C åœæ­¢æœå‹™
npm start
```

### 2. é‡å•Ÿå‰ç«¯æœå‹™
```bash
cd d:\court_data\frontend-court-search-web\lawsowl
# Ctrl+C åœæ­¢æœå‹™
npm start
```

### 3. æ¸…é™¤ç€è¦½å™¨ç·©å­˜
```
F12 > Application > Clear storage > Clear site data
```

### 4. æ¸¬è©¦
```
1. è¨ªå• http://localhost:3001
2. æœç´¢æ³•å®˜: ç‹å©‰å¦‚
3. æå•: "æ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?"
4. æŸ¥çœ‹ Console æ—¥èªŒ
```

### 5. é©—è­‰çµæœ

**é æœŸ Console æ—¥èªŒ**:
```javascript
[AI Assistant] ç™¼é€å•é¡Œ: 
âš ï¸ é‡è¦ä¸Šä¸‹æ–‡ï¼šç”¨æˆ¶æ­£åœ¨æŸ¥è©¢ç‰¹å®šæ³•å®˜çš„è³‡è¨Š...
ç•¶å‰æŸ¥è©¢çš„æ³•å®˜ï¼šç‹å©‰å¦‚
...
ç”¨æˆ¶å•é¡Œï¼šæ³•å®˜å°æ–¼å‹è¨´çš„æ¡ˆä»¶ï¼Œæœ‰ä»€éº¼æ¨£çš„å…±é€šæ€§?

[AI Agent] èª¿ç”¨ MCP å·¥å…·: search_judgments {
  query: '*',
  judge_name: 'ç‹å©‰å¦‚',  // âœ… æœ‰äº†!
  verdict_type: 'åŸå‘Šå‹è¨´',
  limit: 100
}

[AI Agent] è¿”å› 7 ç­†æ¡ˆä»¶ âœ…
```

---

## ğŸ“š ç›¸é—œæ–‡æª”

- **å‰ç«¯çµ„ä»¶**: `lawsowl/src/components/judge/JudgeConversationPanelGreen.js`
- **å¾Œç«¯å·¥å…·å®šç¾©**: `courtDataAPI/utils/ai-agent-tools.js`
- **Prompt å„ªåŒ–è¨˜éŒ„**: `courtDataAPI/docs/AI_AGENT_PROMPT_OPTIMIZATION.md`

---

**ä¿®æ”¹å®Œæˆæ™‚é–“**: 2025-10-03  
**ä¿®æ”¹äººå“¡**: AI Assistant  
**ç‹€æ…‹**: âœ… å®Œæˆï¼Œå¾…æ¸¬è©¦


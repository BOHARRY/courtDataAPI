# ğŸ¦‰ LawSowl å¾‹å¸«AIæœå‹™æ‡‰ç”¨ - å®Œæ•´æ¶æ§‹åˆ†æ

> **ç‰ˆæœ¬**: v1.0.0  
> **åˆ†ææ—¥æœŸ**: 2025-10-03  
> **åˆ†æç¯„åœ**: å‰ç«¯ + å¾Œç«¯ + åŸºç¤è¨­æ–½

---

## ğŸ“‹ ç›®éŒ„

1. [ç³»çµ±æ¦‚è¦½](#ç³»çµ±æ¦‚è¦½)
2. [å‰ç«¯æ¶æ§‹](#å‰ç«¯æ¶æ§‹)
3. [å¾Œç«¯æ¶æ§‹](#å¾Œç«¯æ¶æ§‹)
4. [æ•¸æ“šå±¤æ¶æ§‹](#æ•¸æ“šå±¤æ¶æ§‹)
5. [AIæœå‹™æ¶æ§‹](#aiæœå‹™æ¶æ§‹)
6. [éƒ¨ç½²æ¶æ§‹](#éƒ¨ç½²æ¶æ§‹)
7. [æŠ€è¡“æ£§ç¸½è¦½](#æŠ€è¡“æ£§ç¸½è¦½)
8. [é—œéµæµç¨‹](#é—œéµæµç¨‹)

---

## 1. ç³»çµ±æ¦‚è¦½

### 1.1 æ•´é«”æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ¶å±¤                                    â”‚
â”‚  å¾‹å¸«ã€æ³•å®˜ã€ç•¶äº‹äºº (Web Browser - Chrome/Firefox/Safari)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯å±¤ (Vercel)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  React 18.2.0 SPA                                        â”‚   â”‚
â”‚  â”‚  - åˆ¤æ±ºæ›¸æœå°‹å·¥ä½œå€ (JudgmentWorkspace)                   â”‚   â”‚
â”‚  â”‚  - æ³•å®˜åˆ†æ (SearchJudge)                                â”‚   â”‚
â”‚  â”‚  - å¾‹å¸«æˆ°æ­· (SearchLawyer)                               â”‚   â”‚
â”‚  â”‚  - AI åŠ©æ‰‹ (AIAssistant)                                 â”‚   â”‚
â”‚  â”‚  - è¨´ç‹€ç”Ÿæˆ (PleadingGeneration)                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  ç‹€æ…‹ç®¡ç†: React Context API (Auth, Theme, Workspace)            â”‚
â”‚  è·¯ç”±: React Router 7.5.3                                        â”‚
â”‚  UI: ç´” CSS3 + Framer Motion                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS/REST API
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¾Œç«¯å±¤ (Render.com)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Node.js + Express 4.18.2                                â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  API è·¯ç”± (/api/*)                                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ /search          - åˆ¤æ±ºæ›¸æœå°‹                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ /semantic-search - èªæ„æœå°‹                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ /judges          - æ³•å®˜åˆ†æ                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ /lawyers         - å¾‹å¸«åˆ†æ                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ /ai              - AI åˆ†ææœå‹™                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ /ai-agent        - AI Agent å°è©±                     â”‚   â”‚
â”‚  â”‚  â”œâ”€ /law-search      - æ³•æ¢æœå°‹                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ /workspaces      - å·¥ä½œå€ç®¡ç†                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ /users           - ç”¨æˆ¶ç®¡ç†                          â”‚   â”‚
â”‚  â”‚  â””â”€ /payment         - é‡‘æµè™•ç†                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  ä¸­ä»‹è»Ÿé«”: Auth (Firebase Token), Credit (é»æ•¸æ‰£é™¤)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•¸æ“šå±¤                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Elasticsearch   â”‚  â”‚  Firebase        â”‚  â”‚  MCP Server  â”‚  â”‚
â”‚  â”‚  8.x             â”‚  â”‚  Firestore       â”‚  â”‚  (Python)    â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  Authentication  â”‚  â”‚  FastMCP     â”‚  â”‚
â”‚  â”‚  - 7000+ åˆ¤æ±ºæ›¸  â”‚  â”‚  Storage         â”‚  â”‚              â”‚  â”‚
â”‚  â”‚  - å…¨æ–‡æª¢ç´¢      â”‚  â”‚  - ç”¨æˆ¶è³‡æ–™      â”‚  â”‚  - åˆ¤æ±ºæª¢ç´¢  â”‚  â”‚
â”‚  â”‚  - å‘é‡æœå°‹      â”‚  â”‚  - å·¥ä½œå€        â”‚  â”‚  - èªæ„æœå°‹  â”‚  â”‚
â”‚  â”‚  - æ³•æ¢è³‡æ–™      â”‚  â”‚  - è¨‚é–±è¨˜éŒ„      â”‚  â”‚  - æ³•å®˜åˆ†æ  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI æœå‹™å±¤                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  OpenAI      â”‚  â”‚  Anthropic   â”‚  â”‚  xAI (Grok)          â”‚  â”‚
â”‚  â”‚  GPT-4o      â”‚  â”‚  Claude Opus â”‚  â”‚  Grok-4              â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  4.1         â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  - å°è©±      â”‚  â”‚  - è¨´ç‹€ç”Ÿæˆ  â”‚  â”‚  - æ¡ˆä»¶é©—è­‰          â”‚  â”‚
â”‚  â”‚  - åˆ†æ      â”‚  â”‚  - æ³•å¾‹å¯«ä½œ  â”‚  â”‚  - æ·±åº¦åˆ†æ          â”‚  â”‚
â”‚  â”‚  - å‘é‡åŒ–    â”‚  â”‚              â”‚  â”‚                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„

| åŠŸèƒ½æ¨¡çµ„ | å‰ç«¯çµ„ä»¶ | å¾Œç«¯æœå‹™ | æ•¸æ“šæº |
|---------|---------|---------|--------|
| **åˆ¤æ±ºæ›¸æœå°‹** | JudgmentWorkspace | search.js | Elasticsearch |
| **èªæ„æœå°‹** | SemanticSearch | semanticSearchService.js | ES + OpenAI Embedding |
| **æ³•å®˜åˆ†æ** | SearchJudge | judgeService.js | ES + Firestore |
| **å¾‹å¸«æˆ°æ­·** | SearchLawyer | lawyer.js | ES + Firestore |
| **AI åŠ©æ‰‹** | AIAssistant | ai-agent-controller.js | MCP + OpenAI |
| **è¨´ç‹€ç”Ÿæˆ** | PleadingGeneration | pleadingGenerationService.js | Claude Opus |
| **æ³•æ¢æœå°‹** | LawSearchModal | lawSearchService.js | ES (æ³•æ¢ç´¢å¼•) |
| **å·¥ä½œå€ç®¡ç†** | WorkspacePanel | workspace.js | Firestore |
| **ç”¨æˆ¶èªè­‰** | AuthContext | auth.js (middleware) | Firebase Auth |
| **æ”¯ä»˜ç³»çµ±** | PaymentResult | paymentController.js | è—æ–°é‡‘æµ |

---

## 2. å‰ç«¯æ¶æ§‹

### 2.1 æŠ€è¡“æ£§

```javascript
{
  "æ ¸å¿ƒæ¡†æ¶": "React 18.2.0",
  "è·¯ç”±": "React Router 7.5.3",
  "ç‹€æ…‹ç®¡ç†": "React Context API + useReducer",
  "UIæ¡†æ¶": "ç´” CSS3 (ç„¡ç¬¬ä¸‰æ–¹æ¡†æ¶)",
  "å‹•ç•«": "Framer Motion 12.18.1",
  "åœ–è¡¨": "Chart.js 4.4.9 + react-chartjs-2",
  "æ‹–æ‹½": "@dnd-kit/core 6.3.1",
  "èªè­‰": "Firebase 11.6.1",
  "å·¥ä½œæµ": "ReactFlow 11.11.4",
  "åœ–æ¨™": "React Icons 5.5.0"
}
```

### 2.2 ç›®éŒ„çµæ§‹

```
lawsowl/src/
â”œâ”€â”€ components/          # UI çµ„ä»¶ (100+ å€‹)
â”‚   â”œâ”€â”€ HomePage.js
â”‚   â”œâ”€â”€ JudgmentWorkspace.js
â”‚   â”œâ”€â”€ SearchJudge.js
â”‚   â”œâ”€â”€ SearchLawyer.js
â”‚   â”œâ”€â”€ AIAssistant.js
â”‚   â”œâ”€â”€ judge/          # æ³•å®˜ç›¸é—œçµ„ä»¶
â”‚   â”œâ”€â”€ lawyer/         # å¾‹å¸«ç›¸é—œçµ„ä»¶
â”‚   â”œâ”€â”€ mcp/            # MCP èŠå¤©çµ„ä»¶
â”‚   â””â”€â”€ sidebar/        # å´é‚Šæ¬„çµ„ä»¶
â”œâ”€â”€ pages/              # é é¢çµ„ä»¶
â”‚   â”œâ”€â”€ AIAgentTestPage.js
â”‚   â”œâ”€â”€ JudgeMCPDemoPage.js
â”‚   â””â”€â”€ PaymentResultPage.js
â”œâ”€â”€ contexts/           # Context Providers
â”‚   â”œâ”€â”€ WorkspaceContext.js
â”‚   â””â”€â”€ DeviceContext.js
â”œâ”€â”€ hooks/              # è‡ªå®šç¾© Hooks
â”‚   â””â”€â”€ useAIAgent.js
â”œâ”€â”€ services/           # å‰ç«¯æœå‹™å±¤
â”‚   â”œâ”€â”€ WorkspaceAPIService.js
â”‚   â”œâ”€â”€ firestoreService.js
â”‚   â”œâ”€â”€ paymentService.js
â”‚   â””â”€â”€ CommunicationService.js
â”œâ”€â”€ nodes/              # ç¯€é»ç³»çµ± (å·¥ä½œæµ)
â”‚   â”œâ”€â”€ JudgementNode/
â”‚   â”œâ”€â”€ AnalysisNode/
â”‚   â”œâ”€â”€ PleadingGenerationNode/
â”‚   â””â”€â”€ ResultNode/
â”œâ”€â”€ core/               # æ ¸å¿ƒç³»çµ±
â”‚   â””â”€â”€ NodeRegistry.js
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•¸
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ App.js              # æ ¹çµ„ä»¶
â”œâ”€â”€ index.js            # å…¥å£æ–‡ä»¶
â””â”€â”€ firebase.js         # Firebase é…ç½®
```

### 2.3 ç‹€æ…‹ç®¡ç†æ¶æ§‹

```javascript
// Context Providers å±¤ç´šçµæ§‹
<BrowserRouter>
  <DeviceProvider>           // è¨­å‚™æª¢æ¸¬ (æœ€é«˜å„ªå…ˆç´š)
    <AuthProvider>           // ç”¨æˆ¶èªè­‰
      <ThemeProvider>        // ä¸»é¡Œç®¡ç†
        <WorkspaceProvider>  // å·¥ä½œå€ç‹€æ…‹
          <App />
        </WorkspaceProvider>
      </ThemeProvider>
    </AuthProvider>
  </DeviceProvider>
</BrowserRouter>
```

**æ ¸å¿ƒ Context:**

1. **AuthContext** - ç”¨æˆ¶èªè­‰ç‹€æ…‹
   - `currentUser`: ç•¶å‰ç”¨æˆ¶è³‡è¨Š
   - `loginWithGoogle()`: Google OAuth ç™»å…¥
   - `logout()`: ç™»å‡º
   - æ•´åˆ Firebase Auth + Firestore ç”¨æˆ¶è³‡æ–™

2. **ThemeContext** - ä¸»é¡Œç®¡ç†
   - 7 ç¨®ä¸»é¡Œåˆ‡æ›
   - localStorage æŒä¹…åŒ–

3. **WorkspaceContext** - å·¥ä½œå€ç‹€æ…‹
   - ç¯€é»ç®¡ç†
   - é€£ç·šç®¡ç†
   - æ•¸æ“šåŒæ­¥

4. **DeviceContext** - è¨­å‚™æª¢æ¸¬
   - æ‰‹æ©Ÿ/å¹³æ¿/æ¡Œæ©Ÿè­˜åˆ¥
   - éŸ¿æ‡‰å¼ä½ˆå±€æ§åˆ¶

### 2.4 è·¯ç”±é…ç½®

```javascript
<Routes>
  {/* å…¬é–‹é é¢ */}
  <Route path="/" element={<HomePage />} />
  <Route path="/payment-result" element={<PaymentResultPage />} />
  
  {/* å—ä¿è­·é é¢ (éœ€ç™»å…¥) */}
  <Route path="/search-judgement" element={<ProtectedRoute><JudgmentWorkspace /></ProtectedRoute>} />
  <Route path="/search-judge" element={<ProtectedRoute><SearchJudge /></ProtectedRoute>} />
  <Route path="/search-lawyer" element={<ProtectedRoute><SearchLawyer /></ProtectedRoute>} />
  <Route path="/ai-assistant" element={<ProtectedRoute><AIAssistant /></ProtectedRoute>} />
  <Route path="/collection" element={<ProtectedRoute><Collection /></ProtectedRoute>} />
  <Route path="/notebook" element={<ProtectedRoute><Notebook /></ProtectedRoute>} />
  
  {/* ç®¡ç†å“¡é é¢ */}
  <Route path="/admin/*" element={<AdminRoute><AdminDashboard /></AdminRoute>} />
  
  {/* æ¸¬è©¦é é¢ */}
  <Route path="/ai-agent-test" element={<AIAgentTestPage />} />
  <Route path="/judge-mcp-demo" element={<JudgeMCPDemoPage />} />
</Routes>
```

---

## 3. å¾Œç«¯æ¶æ§‹

### 3.1 æŠ€è¡“æ£§

```javascript
{
  "é‹è¡Œæ™‚": "Node.js 18+",
  "æ¡†æ¶": "Express 4.18.2",
  "æ•¸æ“šåº«å®¢æˆ¶ç«¯": "@elastic/elasticsearch 8.13.0",
  "èªè­‰": "firebase-admin 13.3.0",
  "AI SDK": {
    "OpenAI": "openai 4.99.0",
    "Anthropic": "@anthropic-ai/sdk 0.30.1"
  },
  "å·¥å…·": {
    "HTTP": "axios 1.9.0",
    "éƒµä»¶": "nodemailer 7.0.3",
    "æ–‡ä»¶ä¸Šå‚³": "multer 2.0.0",
    "UUID": "uuid 11.1.0"
  }
}
```

### 3.2 ç›®éŒ„çµæ§‹

```
courtDataAPI/
â”œâ”€â”€ index.js                 # å…¥å£æ–‡ä»¶
â”œâ”€â”€ config/                  # é…ç½®å±¤
â”‚   â”œâ”€â”€ environment.js       # ç’°å¢ƒè®Šæ•¸
â”‚   â”œâ”€â”€ express.js           # Express é…ç½®
â”‚   â”œâ”€â”€ firebase.js          # Firebase Admin åˆå§‹åŒ–
â”‚   â””â”€â”€ elasticsearch.js     # ES å®¢æˆ¶ç«¯
â”œâ”€â”€ routes/                  # è·¯ç”±å±¤ (14 å€‹è·¯ç”±æ–‡ä»¶)
â”‚   â”œâ”€â”€ index.js             # ä¸»è·¯ç”±
â”‚   â”œâ”€â”€ search.js
â”‚   â”œâ”€â”€ semantic-search.js
â”‚   â”œâ”€â”€ judge.js
â”‚   â”œâ”€â”€ lawyer.js
â”‚   â”œâ”€â”€ ai-agent.js
â”‚   â”œâ”€â”€ law-search.js
â”‚   â””â”€â”€ ...
â”œâ”€â”€ controllers/             # æ§åˆ¶å™¨å±¤ (15 å€‹æ§åˆ¶å™¨)
â”‚   â”œâ”€â”€ search-controller.js
â”‚   â”œâ”€â”€ ai-agent-controller.js
â”‚   â”œâ”€â”€ judgeController.js
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/                # æœå‹™å±¤ (25+ å€‹æœå‹™)
â”‚   â”œâ”€â”€ search.js
â”‚   â”œâ”€â”€ semanticSearchService.js
â”‚   â”œâ”€â”€ judgeService.js
â”‚   â”œâ”€â”€ lawSearchService.js
â”‚   â”œâ”€â”€ aiAnalysisService.js
â”‚   â”œâ”€â”€ pleadingGenerationService.js
â”‚   â””â”€â”€ pleading/            # è¨´ç‹€ç”Ÿæˆå­æ¨¡çµ„
â”‚       â”œâ”€â”€ ai/
â”‚       â”œâ”€â”€ prompt/
â”‚       â”œâ”€â”€ task/
â”‚       â””â”€â”€ validation/
â”œâ”€â”€ middleware/              # ä¸­ä»‹è»Ÿé«”
â”‚   â”œâ”€â”€ auth.js              # Firebase Token é©—è­‰
â”‚   â”œâ”€â”€ adminAuth.js         # ç®¡ç†å“¡æ¬Šé™
â”‚   â””â”€â”€ credit.js            # é»æ•¸æ‰£é™¤
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ ai-agent-tools.js    # AI Agent å·¥å…·å®šç¾©
â”‚   â”œâ”€â”€ ai-agent-local-functions.js
â”‚   â”œâ”€â”€ case-analyzer.js
â”‚   â””â”€â”€ win-rate-calculator.js
â””â”€â”€ docs/                    # æ–‡æª”
```

### 3.3 API è·¯ç”±ç¸½è¦½

| è·¯ç”±å‰ç¶´ | åŠŸèƒ½ | ä¸»è¦ç«¯é» |
|---------|------|---------|
| `/api/search` | åˆ¤æ±ºæ›¸æœå°‹ | POST `/` |
| `/api/semantic-search` | èªæ„æœå°‹ | POST `/legal-issues` |
| `/api/judges` | æ³•å®˜åˆ†æ | GET `/:judgeName` |
| `/api/lawyers` | å¾‹å¸«åˆ†æ | GET `/:lawyerName` |
| `/api/ai-agent` | AI Agent | POST `/chat` |
| `/api/law-search` | æ³•æ¢æœå°‹ | POST `/search`, `/semantic` |
| `/api/ai` | AI åˆ†æ | POST `/success-analysis`, `/citation-analysis` |
| `/api/workspaces` | å·¥ä½œå€ | GET `/`, POST `/`, PUT `/:id` |
| `/api/users` | ç”¨æˆ¶ç®¡ç† | GET `/profile`, PUT `/credits` |
| `/api/payment` | é‡‘æµ | POST `/create-order`, `/callback` |

### 3.4 ä¸­ä»‹è»Ÿé«”éˆ

```javascript
// å…¸å‹çš„ API è«‹æ±‚æµç¨‹
Request
  â†“
CORS (å…è¨±å‰ç«¯åŸŸå)
  â†“
Body Parser (JSON/URL-encoded)
  â†“
Logger (è«‹æ±‚æ—¥èªŒ)
  â†“
verifyToken (Firebase Token é©—è­‰)
  â†“
checkAndDeductCredits (é»æ•¸æ‰£é™¤)
  â†“
Controller (æ¥­å‹™é‚è¼¯)
  â†“
Service (æ•¸æ“šè™•ç†)
  â†“
Response
```

---

## 4. æ•¸æ“šå±¤æ¶æ§‹

### 4.1 Elasticsearch æ¶æ§‹

**ç´¢å¼•**: `search-boooook`

**æ–‡æª”çµæ§‹**:
```json
{
  "JID": "TPHV,111,ä¸Š,397,20250730,1",
  "JTITLE": "è‡ºç£é«˜ç­‰æ³•é™¢æ°‘äº‹åˆ¤æ±º",
  "JFULL": "å®Œæ•´åˆ¤æ±ºæ›¸å…§å®¹...",
  "JYEAR": "111",
  "JCASE": "ä¸Š",
  "JNO": "397",
  "JDATE": "20250730",
  "court": "è‡ºç£é«˜ç­‰æ³•é™¢",
  "judge_names": ["ç‹å©‰å¦‚", "ææ˜"],
  "lawyer_names": ["é™³å¾‹å¸«"],
  "verdict_type": "åŸå‘Šå‹è¨´",
  "summary_ai": "AI ç”Ÿæˆæ‘˜è¦",
  "main_reasons_ai": ["ç†ç”±1", "ç†ç”±2"],
  "legal_issues": [
    {
      "issue": "å¥‘ç´„æ•ˆåŠ›",
      "position": "åŸå‘Š",
      "argument": "...",
      "result": "å‹è¨´"
    }
  ],
  "citations": [
    {
      "law": "æ°‘æ³•",
      "article": "ç¬¬184æ¢",
      "content": "..."
    }
  ],
  "text_embedding": [0.123, 0.456, ...] // 1536 ç¶­å‘é‡
}
```

**æŸ¥è©¢é¡å‹**:
1. **å…¨æ–‡æª¢ç´¢**: `match`, `multi_match`
2. **ç²¾ç¢ºåŒ¹é…**: `term`, `terms`
3. **ç¯„åœæŸ¥è©¢**: `range` (æ—¥æœŸã€é‡‘é¡)
4. **å‘é‡æœå°‹**: `knn` (èªæ„æœå°‹)
5. **èšåˆåˆ†æ**: `aggregations` (çµ±è¨ˆ)

### 4.2 Firebase Firestore æ¶æ§‹

**é›†åˆçµæ§‹**:

```
users/                          # ç”¨æˆ¶é›†åˆ
  {userId}/
    - email: string
    - displayName: string
    - credits: number           # å‰©é¤˜é»æ•¸
    - level: string             # æœƒå“¡ç­‰ç´š
    - profession: string        # è·æ¥­
    - isAdmin: boolean
    - createdAt: timestamp
    
    searchHistory/              # å­é›†åˆ: æœå°‹æ­·å²
      {historyId}/
        - query: object
        - timestamp: timestamp
        - type: string
    
    collections/                # å­é›†åˆ: æ”¶è—
      {collectionId}/
        - judgmentId: string
        - timestamp: timestamp

workspaces/                     # å·¥ä½œå€é›†åˆ
  {workspaceId}/
    - userId: string
    - name: string
    - nodes: array              # ç¯€é»æ•¸æ“š
    - edges: array              # é€£ç·šæ•¸æ“š
    - createdAt: timestamp
    - updatedAt: timestamp

orders/                         # è¨‚å–®é›†åˆ
  {orderId}/
    - userId: string
    - productId: string
    - amount: number
    - status: string
    - createdAt: timestamp

platformStatus/                 # å¹³å°ç‹€æ…‹
  databaseStats/
    - totalJudgments: number
    - lastUpdated: timestamp
```

---

## 5. AI æœå‹™æ¶æ§‹

### 5.1 AI Agent æ¶æ§‹

```
ç”¨æˆ¶å•é¡Œ: "åˆ†æç‹å©‰å¦‚æ³•å®˜çš„åˆ¤æ±ºå‚¾å‘"
    â†“
OpenAI GPT-4o (Function Calling)
    â†“ æ±ºç­–: éœ€è¦èª¿ç”¨å“ªäº›å·¥å…·?
    â”œâ”€ MCP å·¥å…· (6 å€‹)
    â”‚  â”œâ”€ search_judgments          # æœå°‹åˆ¤æ±ºæ›¸
    â”‚  â”œâ”€ semantic_search_judgments # èªæ„æœå°‹
    â”‚  â”œâ”€ analyze_judge             # æ³•å®˜åˆ†æ
    â”‚  â”œâ”€ get_citation_analysis     # å¼•ç”¨åˆ†æ
    â”‚  â”œâ”€ get_case_details          # æ¡ˆä»¶è©³æƒ…
    â”‚  â””â”€ get_perspective_analysis  # è§€é»åˆ†æ
    â”‚
    â””â”€ æœ¬åœ°å‡½æ•¸ (5 å€‹)
       â”œâ”€ calculate_verdict_statistics    # åˆ¤æ±ºçµ±è¨ˆ
       â”œâ”€ extract_top_citations           # æå–å¸¸ç”¨æ³•æ¢
       â”œâ”€ analyze_amount_trends           # é‡‘é¡è¶¨å‹¢
       â”œâ”€ compare_judges                  # æ³•å®˜æ¯”è¼ƒ
       â””â”€ calculate_case_type_distribution # æ¡ˆç”±åˆ†å¸ƒ
    â†“
æ•¸æ“šæ•´åˆ + åˆ†æ
    â†“
è‡ªç„¶èªè¨€å›ç­”
```

**MCP Server** (Python + FastMCP):
- éƒ¨ç½²: Render.com
- ç«¯é»: `https://lawsowl-mcp.onrender.com`
- å”è­°: JSON-RPC 2.0
- å‚³è¼¸: HTTP (Streamable)

### 5.2 AI åˆ†ææœå‹™

| æœå‹™ | AI æ¨¡å‹ | ç”¨é€” | é»æ•¸æ¶ˆè€— |
|------|---------|------|---------|
| **å‹è¨´é—œéµåˆ†æ** | GPT-4o | åˆ†æåˆ¤æ±ºæ›¸å‹è¨´å› ç´  | 50 |
| **æ­¸ç´å…±åŒé»** | GPT-4o | å¤šåˆ¤æ±ºæ›¸å…±åŒé»æå– | 30 |
| **æ¡ˆä¾‹æ¯”å°** | GPT-4o | åˆ¤ä¾‹æ¯”å°åˆ†æ | 40 |
| **å¼•ç”¨åˆ†æ** | GPT-4o | æ³•æ¢å¼•ç”¨åˆ†æ | 20 |
| **è¨´ç‹€ç”Ÿæˆ** | Claude Opus 4.1 | ç”Ÿæˆæ³•å¾‹æ–‡æ›¸ | 100 |
| **å¯«ä½œåŠ©æ‰‹** | GPT-4o | æ³•å¾‹å¯«ä½œè¼”åŠ© | 10 |
| **èªæ„æœå°‹** | text-embedding-3-large | å‘é‡åŒ–æŸ¥è©¢ | 5 |

### 5.3 è¨´ç‹€ç”Ÿæˆæµç¨‹

```
ç”¨æˆ¶è¼¸å…¥ (æ¡ˆä»¶è³‡è¨Š + è­‰æ“š)
    â†“
å‰ç«¯: PleadingGenerationNode
    â†“ POST /api/ai/pleading-generation
å¾Œç«¯: pleadingGenerationService.js
    â†“
1. é©—è­‰è¼¸å…¥ (validation/)
2. æ§‹å»º Prompt (prompt/)
3. èª¿ç”¨ Claude Opus 4.1 (ai/)
4. å¯©æ ¸è¼¸å‡º (audit/)
5. æ ¼å¼åŒ–æ–‡æ›¸ (utils/)
    â†“
è¿”å›: å®Œæ•´è¨´ç‹€ (Word/PDF)
```

---

## 6. éƒ¨ç½²æ¶æ§‹

### 6.1 éƒ¨ç½²ç’°å¢ƒ

| çµ„ä»¶ | å¹³å° | æ–¹æ¡ˆ | URL |
|------|------|------|-----|
| **å‰ç«¯ (Stable)** | Vercel | Pro | https://frontend-court-search-web.vercel.app |
| **å‰ç«¯ (Beta)** | Vercel | Pro | https://frontend-court-search-web-beta.vercel.app |
| **å¾Œç«¯ (Stable)** | Render.com | Starter | https://courtdataapi.onrender.com |
| **å¾Œç«¯ (Beta)** | Render.com | Free | https://courtdataapi-beta.onrender.com |
| **MCP Server** | Render.com | Starter | https://lawsowl-mcp.onrender.com |
| **Elasticsearch** | Elastic Cloud | Standard | ap-southeast-1.aws.elastic.cloud |
| **Firebase** | Google Cloud | Blaze | - |

### 6.2 ç’°å¢ƒè®Šæ•¸é…ç½®

**å‰ç«¯ (.env)**:
```bash
# API ç«¯é»
REACT_APP_API_BASE_URL=https://courtdataapi.onrender.com
REACT_APP_MCP_SERVER_URL=https://lawsowl-mcp.onrender.com

# Firebase
REACT_APP_FIREBASE_API_KEY=...
REACT_APP_FIREBASE_AUTH_DOMAIN=...
REACT_APP_FIREBASE_PROJECT_ID=...

# åŠŸèƒ½é–‹é—œ
REACT_APP_SUPPRESS_FREQUENT_LOGS=true
REACT_APP_DISABLE_HEARTBEAT=true
```

**å¾Œç«¯ (.env)**:
```bash
# Elasticsearch
ES_URL=https://...elastic.cloud
ES_API_KEY=...

# Firebase Admin
FIREBASE_SERVICE_ACCOUNT_KEY_JSON={"type":"service_account",...}

# OpenAI
OPENAI_API_KEY=sk-proj-...

# Anthropic
CLAUDE_API_KEY=sk-ant-...

# xAI
XAI_API_KEY=xai-...

# é‡‘æµ
NEWEBPAY_MERCHANT_ID=...
NEWEBPAY_HASH_KEY=...
NEWEBPAY_HASH_IV=...
```

---

## 7. æŠ€è¡“æ£§ç¸½è¦½

### 7.1 å‰ç«¯æŠ€è¡“æ£§

| é¡åˆ¥ | æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **æ ¸å¿ƒ** | React | 18.2.0 | UI æ¡†æ¶ |
| | React Router | 7.5.3 | è·¯ç”±ç®¡ç† |
| | React Context API | - | ç‹€æ…‹ç®¡ç† |
| **UI** | ç´” CSS3 | - | æ¨£å¼ |
| | Framer Motion | 12.18.1 | å‹•ç•« |
| | React Icons | 5.5.0 | åœ–æ¨™ |
| **åœ–è¡¨** | Chart.js | 4.4.9 | åœ–è¡¨æ¸²æŸ“ |
| | react-chartjs-2 | 5.3.0 | React å°è£ |
| **å·¥ä½œæµ** | ReactFlow | 11.11.4 | ç¯€é»ç·¨è¼¯å™¨ |
| | @dnd-kit/core | 6.3.1 | æ‹–æ‹½åŠŸèƒ½ |
| **èªè­‰** | Firebase | 11.6.1 | ç”¨æˆ¶èªè­‰ |
| **å·¥å…·** | Axios | - | HTTP è«‹æ±‚ |
| | date-fns | 4.1.0 | æ—¥æœŸè™•ç† |
| | lodash-es | 4.17.21 | å·¥å…·å‡½æ•¸ |

### 7.2 å¾Œç«¯æŠ€è¡“æ£§

| é¡åˆ¥ | æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **æ ¸å¿ƒ** | Node.js | 18+ | é‹è¡Œæ™‚ |
| | Express | 4.18.2 | Web æ¡†æ¶ |
| **æ•¸æ“šåº«** | @elastic/elasticsearch | 8.13.0 | ES å®¢æˆ¶ç«¯ |
| | firebase-admin | 13.3.0 | Firestore å®¢æˆ¶ç«¯ |
| **AI** | openai | 4.99.0 | OpenAI SDK |
| | @anthropic-ai/sdk | 0.30.1 | Claude SDK |
| **å·¥å…·** | axios | 1.9.0 | HTTP å®¢æˆ¶ç«¯ |
| | nodemailer | 7.0.3 | éƒµä»¶ç™¼é€ |
| | multer | 2.0.0 | æ–‡ä»¶ä¸Šå‚³ |
| | uuid | 11.1.0 | UUID ç”Ÿæˆ |

---

## 8. é—œéµæµç¨‹

### 8.1 ç”¨æˆ¶ç™»å…¥æµç¨‹

```
1. ç”¨æˆ¶é»æ“Š "Google ç™»å…¥"
2. å‰ç«¯: AuthContext.loginWithGoogle()
3. Firebase Auth: Google OAuth å½ˆçª—
4. ç”¨æˆ¶æˆæ¬Š
5. Firebase è¿”å› ID Token
6. å‰ç«¯: å­˜å„² Token åˆ° localStorage
7. å‰ç«¯: ç›£è½ onAuthStateChanged
8. Firestore: è®€å–ç”¨æˆ¶è©³ç´°è³‡æ–™ (credits, level)
9. å‰ç«¯: æ›´æ–° currentUser ç‹€æ…‹
10. é‡å®šå‘åˆ°ä¸»é 
```

### 8.2 åˆ¤æ±ºæ›¸æœå°‹æµç¨‹

```
1. ç”¨æˆ¶è¼¸å…¥é—œéµå­— + ç¯©é¸æ¢ä»¶
2. å‰ç«¯: JudgmentWorkspace ç™¼é€ POST /api/search
3. å¾Œç«¯: search-controller.js æ¥æ”¶è«‹æ±‚
4. å¾Œç«¯: verifyToken ä¸­ä»‹è»Ÿé«”é©—è­‰ Token
5. å¾Œç«¯: search.js æœå‹™æ§‹å»º ES æŸ¥è©¢
6. Elasticsearch: åŸ·è¡ŒæŸ¥è©¢
7. å¾Œç«¯: æ ¼å¼åŒ–çµæœ
8. å‰ç«¯: é¡¯ç¤ºæœå°‹çµæœåˆ—è¡¨
9. ç”¨æˆ¶é»æ“Šåˆ¤æ±ºæ›¸
10. å‰ç«¯: å‰µå»º JudgementNode ç¯€é»
11. å‰ç«¯: é¡¯ç¤ºåˆ¤æ±ºæ›¸è©³æƒ…
```

### 8.3 AI åˆ†ææµç¨‹

```
1. ç”¨æˆ¶é¸æ“‡åˆ¤æ±ºæ›¸ + é»æ“Š "å‹è¨´é—œéµåˆ†æ"
2. å‰ç«¯: POST /api/ai/success-analysis
3. å¾Œç«¯: verifyToken + checkAndDeductCredits (æ‰£ 50 é»)
4. å¾Œç«¯: aiSuccessAnalysisService.js
5. å¾Œç«¯: èª¿ç”¨ OpenAI GPT-4o
6. OpenAI: åˆ†æåˆ¤æ±ºæ›¸å…§å®¹
7. å¾Œç«¯: æ ¼å¼åŒ–åˆ†æçµæœ
8. å‰ç«¯: é¡¯ç¤ºåˆ†æçµæœ (åœ–è¡¨ + æ–‡å­—)
9. Firestore: æ›´æ–°ç”¨æˆ¶é»æ•¸
```

---

## ç¸½çµ

LawSowl æ˜¯ä¸€å€‹**å…¨æ£§æ³•å¾‹ç§‘æŠ€å¹³å°**,æ•´åˆäº†:

âœ… **ç¾ä»£åŒ–å‰ç«¯**: React + Context API + ç´” CSS3  
âœ… **ç©©å¥å¾Œç«¯**: Node.js + Express + å¤šå±¤æ¶æ§‹  
âœ… **å¼·å¤§æ•¸æ“šå±¤**: Elasticsearch + Firestore  
âœ… **å…ˆé€² AI**: OpenAI + Claude + xAI  
âœ… **å°ˆæ¥­éƒ¨ç½²**: Vercel + Render.com + Elastic Cloud  

**æ ¸å¿ƒå„ªå‹¢**:
- ğŸ¯ **7000+ åˆ¤æ±ºæ›¸** å…¨æ–‡æª¢ç´¢
- ğŸ¤– **AI Agent** è‡ªç„¶èªè¨€æŸ¥è©¢
- ğŸ“Š **å¤šç¶­åº¦åˆ†æ** (æ³•å®˜/å¾‹å¸«/æ¡ˆç”±)
- ğŸ“ **è¨´ç‹€ç”Ÿæˆ** Claude Opus 4.1
- ğŸ” **èªæ„æœå°‹** å‘é‡åŒ–æª¢ç´¢
- ğŸ’³ **å®Œæ•´å•†æ¥­åŒ–** é»æ•¸ç³»çµ± + é‡‘æµ

**æŠ€è¡“äº®é»**:
- MCP (Model Context Protocol) æ•´åˆ
- Function Calling æ™ºèƒ½å·¥å…·èª¿ç”¨
- ReactFlow ç¯€é»å·¥ä½œæµ
- é›™ç’°å¢ƒéƒ¨ç½² (Stable + Beta)
- å®Œæ•´çš„éŒ¯èª¤è™•ç†å’Œæ—¥èªŒç³»çµ±

